# 矢量和矩阵

矢量和矩阵在图形学中非常重要，会大量使用到矢量和矩阵，这篇会介绍这系列教程中需要使用到的相关知识。更多详细关于矢量和矩阵的知识还请查看其他课程。

## 矢量

矢量在平时使用中其实就是一个普通的数组，如 `[X, Y, Z]`。

矢量在表示时，会在上方加一个箭头(→)，如矢量 A，是在 A 上方加一个 → ，这里为了简单就不加箭头了。矢量在图中也是一个箭头的形状。

矢量只有方向和大小，没有位置。如下图中，矢量 A 可以表示为 `[1, 1]`，它和矢量 B 是同一个矢量，因为矢量没有位置，所以可以随便的移动它，最终还是表示同一个矢量。矢量的箭头那一端称为终点，另一端称为起点。

![image](https://user-images.githubusercontent.com/25923128/120911498-8b680980-c6ba-11eb-825e-3c2f48578f93.png)

### 零矢量

零矢量每个位置都是 0，如三维零矢量可以表示为 `[0, 0, 0]`，零矢量没有大小、没有方向当然它也没有位置。任何矢量加上零矢量都等于它本身。

### 矢量加减法

矢量的加减法就和标量的加减法一样，就是把矢量的对应项加或减起来。矢量只能和同维度的矢量相加或相减。

```js
[x1, y1, z1] + [x2, y2, z2] = [x1 + x2, y1 + y2, z1 + z2]

[x1, y1, z1] - [x2, y2, z2] = [x1 - x2, y1 - y2, z1 - z2]
```

矢量加法是可交换的 `A + B = B + A`，矢量减法可反交换 `A - B = -(B - A)`。

在几何中，矢量的加减法如下图所示。

![image](https://user-images.githubusercontent.com/25923128/120915828-887c1180-c6d8-11eb-9743-31aceb57d616.png)

A + B，是把一个点先应用 A，然后应用 B，然后 A + B 就等于从 A 的尾部到 B 的头部的矢量。A - B 也是一样，先应用 A，再应用 -B（也就是将 B 的方向反转下）。需要注意的是 `A - B` 与 `B - A` 是两个方向相反的矢量。 

### 标量和矢量乘法

标量和矢量乘法也非常简单，直接用标量乘上矢量中各个项就行了。

```js
k * [x, y, z] = [kx, ky, kz]
```

如果 `k` 为 `-1` 时，会得到矢量的负矢量（方向相反，大小相等）。

在几何中，标量乘矢量，标量就是矢量长度的缩放因子，如 `k` 等于 `2`，那么所得矢量是原矢量两倍长。

### 矢量大小

矢量的大小用双垂直线表示，比如矢量 A 的大小表示为 `||A||`。要计算矢量大小也非常简单，只要运用勾股定理就行了。

```js
||A|| = ||[x, y]|| = Math.sqrt(x ** 2, y ** 2)

||B|| = ||[x, y, z]|| = Math.sqrt(x ** 2, y ** 2, z ** 2)
```

![image](https://user-images.githubusercontent.com/25923128/120923449-2f74a380-c701-11eb-803a-b497aa015c60.png)

### 单位矢量

单位矢量是大小为 1 的矢量，单位矢量也称为归一化矢量或法线，称为法线时一般表示该矢量垂直与一个表面。

要归一化一个矢量，只需要将矢量除以它的大小就行了。

```js
len = ||[x, y, z]|| = Math.sqrt(x ** 2, y ** 2, z ** 2)
norm = [x, y, z] / len = [x / len, y / len, z / len]
```

归一化一个矢量，就是将矢量的长度变为 1，方向不变。

### 矢量乘法

矢量有两种乘法，分别是点积和叉积。

#### 点积

矢量点积的结果是一个标量，是将两个矢量各个分量相乘，再相加。

```js
[x1, y1, z1] · [x2, y2, z2] = x1*x2 + y1*y2 + z1*z2
```

点积满足如下性值。

```js
A · B = B · A

(kA) · B = k(A · B) = a · (k · B)

A · (B + C) = A · B + A · C

A · A = ||A|| ** 2
```

在几何上，矢量点积可以解释为投影。下图中的矢量 A 为单位矢量。

![image](https://user-images.githubusercontent.com/25923128/120926566-00196300-c710-11eb-9764-2b734150afa4.png)

点积 A · B 等于 B 投影到平行于 A 的任意线上的有符号长度，乘以 A 的长度。

矢量的点积可以给两个矢量的方向做一个初略的判断，如果两个矢量方向差不多相同则点积大于 0，如果垂直则等于 0，如果差不多相反则小于 0。

利用点积我们还可以把一个矢量分解为两个矢量，分别是垂直分量和平型分量。

![image](https://user-images.githubusercontent.com/25923128/120929271-fa754a80-c71a-11eb-802c-7c5ec1b657df.png)

上图中 A 还是单位矢量。我们知道 B 等于 B∥ + B⊥。其中 ||B∥|| 等于 A · B。所以我们可以得出下面结论。

```js
B∥ = ||B∥|| * A = (A · B) * A

B⊥ = B - B∥ = B - (A · B) * A
```

我们还可以利用点积求出两个矢量间的夹角。

![image](https://user-images.githubusercontent.com/25923128/120930415-b9336980-c71f-11eb-85f6-23ecf1312b0b.png)

上图中 A 和 B 都是单位矢量。根据基本三角函数，cos(θ) 等于对边的邻边比斜边。

```js
cos(θ) = A · B / ||B|| = A · B
```

两个单位矢量的点积就等于它们之间的余旋值。

那么我们也可以得出任何矢量之间余旋值得公式。

```js
A · B = ||A|| * ||B|| * cos(θ)

θ = arccos(A · B / ||A||*||B||)
```

#### 叉积

### 矢量和点

## 矩阵


